---
icon: edit
date: 2023-07-02
category:
  - js
tag:
  - 面试题
star: true
sticky: false
copy.disableCopy: true
---

# 箭头函数中的this指向

> 1. 在箭头函数中,this指向,父级程序的this指向
> 2. 如果父级程序有this指向,那么箭头函数指向的就是父级程序的this
> 3. 如果父级程序没有this指向,那么指向的就是window
<!-- more -->
## 箭头函数
​    function(){}        ---   ()=>{}     箭头函数
​    function(e){}       ---   e =>{}     箭头函数
​    function(){一行}    ---   ()=>一行    箭头函数
​    function(e){一行}   ---   e =>一行    箭头函数

```
特点:1,this指向与一般的function函数不同
    声明式  function fun(){}           this指向,window
    赋值式  var fun = function(){}     this指向,window
    forEach()循环                      this指向,window
    定时器,延时器  setInterval(function(){} , 时间)
                                        this指向,window
    对象中的函数 const obj = {fun:function(){}}
                                        this指向,obj对象
    事件处理函数 标签.addEventListener(事件类型,function(){})
                                        this指向,标签对象
                                    
    箭头函数的this指向,是父级程序的this指向
        如果父级程序有this指向,指向向的就是父级程序的this指向
        如果父级程序没有this指向(对象,数组是没有this),指向的是window
    
    2,箭头函数,无法改变this指向
```

## 箭头函数的this指向

- ​    父级程序的this指向
- ​    如果父级程序有this指向(父级程序也是函数),this指向的就是父级程序的this指向
- ​    如果父级程序没有this指向(数组,对象....),this指向的是window

### 普通函数的this指向
声明式,赋值式/匿名函数,对象中函数,绑定的事件处理函数
this都是指向的调用函数时,之前定义的内容

1,声明式 --- 指向的是window

```javascript
function fun1(){
    console.log(this);
}

fun1();
```

2,匿名函数/赋值式 --- 指向的是window

```javascript
const fun2 = function(){
    console.log(this);
}
fun2();
```

3,定义在对象中的函数 --- 指向的是对象

```javascript
const obj = { 
    fun3 : function(){
        console.log(this);
    }
}
obj.fun3();
```

4,绑定的事件处理函数 --- 指向的是绑定事件处理函数的标签

```javascript
const oDiv = document.querySelector('div');
// oDiv.onclick = function(){
//     console.log(this);
// }

oDiv.addEventListener('click' , function(){
    console.log(this);
})
```

### 箭头函数this指向

this的指向是父级程序的this指向当前的程序,箭头函数的父级程序,如果没有，则this指向的就是window

~~~javascript
oDiv.addEventListener('click' , ()=>{
    console.log(this);
})

// 对li进行操作
const oLis = document.querySelectorAll('li');
oLis.forEach(function(item,key){
    // console.log(this);  // 输出的是forEach的函数的this指向
    // 箭头函数的this,是父级程序,forEach()的this,是window
    item.addEventListener('click' , ()=>{
        // console.log(key,this);
    })
})

forEach()中 函数的this指向,就是window
const arr = [1,2,3,4,5,6];
arr.forEach(function(){
    console.log(this);
})


const obj = {
    // 普通函数,this指向对象
    fun1 : function(){console.log(this)},
    // 箭头函数this指向是,父级程序
    // 父级程序是对象
    // 只有函数有this,obj对象没有this
    // 父级程序没有this,指向的是window
    fun2 : ()=>{console.log(this)},

    // fun3是一个普通函数,this指向的是obj对象
    fun3 : function(){
        // fun4,是一个箭头函数,this指向的是父级程序的this指向
        // 父级程序是fun3,fun3的this是对象,fun4箭头函数的this也是对象
        const fun4 = ()=>{console.log(this)};
        fun4();
    }

}
obj.fun1();
obj.fun2();
obj.fun3();
~~~